<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>상품등록 페이지</title>
    <link rel="stylesheet" type="text/css" href="../common/css/basic.css">
    <link rel="stylesheet" type="text/css" href="../common/css/login.css?v=1">
    <link rel="stylesheet" type="text/css" href="../common/css/main.css">
    <link rel="stylesheet" type="text/css" href="../common/css/product.css?v=5">
    <link rel="icon" href="../common/img/logo.png" sizes="128x128">
    <link rel="icon" href="../common/img/logo.png" sizes="64x64">
    <link rel="icon" href="../common/img/logo.png" sizes="32x32">
    <link rel="icon" href="../common/img/logo.png" sizes="16x16">
</head>
<body>
<header class="headercss">
    <div class="header_div">
        <p><img src="../common/img/logo.png" class="logo_sm"> ADMINISTRATOR</p>
        <p>홍길동 관리자 <a href="#">[개인정보 수정]</a> <a href="#">[로그아웃]</a></p>
    </div>
</header>
<nav class="navcss">
    <div class="nav_div">
        <ol>
            <li title="쇼핑몰 관리자 리스트">쇼핑몰 관리자 리스트</li>
            <li title="쇼핑몰 상품관리">쇼핑몰 상품관리</li>
            <li title="쇼핑몰 기본설정">쇼핑몰 기본설정</li>
            <li title="쇼핑몰 공지사항">쇼핑몰 공지사항</li>
        </ol>
    </div>

</nav>



<main class="maincss">
<section>
<p>상품 등록 페이지</p>
<form id="frm" method="post" action="./product_write.do" enctype="multipart/form-data">
<div class="product_insert">
    <ul>
        <li>대메뉴 카테고리</li>
        <li>
            <select class="product_input1" name="pbigca">
                <option></option>
            </select><input type="button" value="카테고리 등록" title="카테고리 등록" class="product_btn"> <span class="help_text">※ 해당 카테고리가 없을 경우 신규 등록하시길 바랍니다.</span>
        </li>
    </ul>
    <ul>
        <li>상품코드</li>
        <li>
            <input type="text" class="product_input1" name="pcode"> 
            <input type="button" value="중복확인" title="중복확인" class="product_btn" onclick="dupcheck()"> <span class="help_text">※ 상품코드는 절대 중복되지 않도록 합니다.</span>
        </li>
    </ul>
    <ul>
        <li>상품명</li>
        <li>
            <input type="text" name="pname" class="product_input2" maxlength="100"> <span class="help_text">※ 상품명은 최대 100자까지만 적용할 수 있습니다.</span>
        </li>
    </ul>
    <ul>
        <li>상품 부가설명</li>
        <li>
            <input type="text" class="product_input4" maxlength="200"> <span class="help_text">※ 상품명은 최대 200자까지만 적용할 수 있습니다.</span>
        </li>
    </ul>
    <ul>
        <li>판매가격</li>
        <li>
            <input type="text" name="pori" onkeyup="calsel()" class="product_input3" maxlength="7">원 <span class="help_text"> ※ , 없이 숫자만 입력하세요 최대 7자리</span>
        </li>
    </ul>
    <ul>
        <li>할인율</li>
        <li>
            <input type="text" name="psale" onkeyup="calsel()" class="product_input3" maxlength="2" value="0">% <span class="help_text">※ 숫자만 입력하세요</span>
        </li>
    </ul>
    <ul>
        <li>할인가격</li>
        <li>
            <input type="text" name="pprice" class="product_input3" maxlength="7" value="0" readonly>원 <span class="help_text"> ※ 할인율이 0%일 경우 할인가격은 0으로 처리 합니다.</span>
        </li>
    </ul>
    <ul>
        <li>상품재고</li>
        <li>
            <input type="text" name="pcount" class="product_input3" maxlength="4" value="0">EA <span class="help_text">※ 숫자만 입력하세요. 재고가 0일 경우 soldout이 됩니다.</span>
        </li>
    </ul>
    <ul>
        <li>판매 유/무</li>
        <li>
            <label class="product_label">
            <input type="radio" name="psell" value="Y" style="vertical-align:-1px;" checked> 판매시작
            </label>
            <label class="product_label">
            <input type="radio" name="psell" value="N" style="vertical-align:-1px;"> 판매종료
            </label> <span class="help_text">※ 숫자만 입력하세요. 재고가 0일 경우 soldout이 됩니다.</span>
        </li>
    </ul>
    <ul>
        <li>조기품절</li>
        <li>
            <label class="product_label">
                <input type="radio" name="psoldout" value="Y" style="vertical-align:-1px;"> 사용
            </label>
            <label class="product_label">
                <input type="radio" name="psoldout" value="N" style="vertical-align:-1px;" checked> 미사용
            </label>
        </li>
    </ul>
    <ul style="height: 160px;">
        <li>상품 대표이미지</li>
        <li>
            <ol style="width:100%; height: auto;">
            <li style="width:100%; height:45px;">
            <input type="file" name="pimg">
            <span class="help_text">※ 상품 대표이미지 이며, 이미지 용량은 2MB 까지 입니다.</span>
            </li>
            <li style="height:45px;">
            <input type="file">
            <span class="help_text">※ 추가 이미지 이며, 이미지 용량은 2MB 까지 입니다.</span>
            </li>
            <li style="height:45px;">
            <input type="file">
            <span class="help_text">※ 추가 이미지 이며, 이미지 용량은 2MB 까지 입니다.</span>
            </li>
            </ol>
        </li>
    </ul>
    <ul style="height: 400px;">
        <li>상품 상세설명</li>
        <li>
            <textarea class="product_text1" name="pdetail"></textarea>
        </li>
    </ul>
</div>
<div class="subpage_view4" style="text-align:center; margin-bottom: 100px;">
    <input type="button" value="상품 리스트" onclick="location.href='./a_product_listok.do'" title="상품 리스트" class="p_button p_button_color1" style="margin-right: 5px;">
    <input type="button" value="상품 등록" onclick="gopage()" title="상품 등록" class="p_button p_button_color2">
    </span>
</div>
</form>
</section>	
</main>
<footer class="main_copyright">
    <div>
        Copyright ⓒ 2024 shopbag All rights reserved.
    </div>
</footer>
</body>
<script>

function dupcheck() {
    var pcode = frm.pcode.value;

    if (pcode === "") {
        alert("상품코드를 입력해 주세요.");
        return;
    }

    var xhr = new XMLHttpRequest();
    xhr.open("GET", "./product_write.do?pcode=" + pcode, true);
    xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && xhr.status === 200) {
            if (xhr.responseText === "dup") {
                alert("이미 존재하는 상품코드입니다.");
            } else {
                alert("사용 가능한 상품코드입니다.");
            }
        }
    };
    xhr.send();
}

function pdcode() {
	var c = Math.floor(Math.random()*900000)+100000;
	frm.pcode.value = c;
}
window.onload = function() {
	pdcode();
};
function calsel() {
	var pori = frm.pori.value;
	var psale = frm.psale.value;
	var pprice = frm.pprice;
	
	if(isNaN(pori) || isNaN(psale)){
		alert("숫자만 입력하세요");
		pprice.value = "0";
		return;
	}
	pori= Number(pori);
	psale = Number(psale);
	
	var finalp = pori * (1-psale / 100);
	finalp = Math.round(finalp);
	finalp = finalp.toLocaleString();
	
	pprice.value = finalp;
	
}



function gopage() {
	if (frm.pname.value === "") {
		alert("상품명을 입력해 주세요.");
		frm.pname.focus();
		return;
	}
	if (frm.pori.value === "" || isNaN(frm.pori.value)) {
		alert("판매가격을 숫자로 입력해 주세요.");
		frm.pori.focus();
		return;
	}
	if (frm.pdetail.value === "") {
		alert("상품 상세설명을 입력해 주세요.");
		frm.pdetail.focus();
		return;
	}
	frm.submit();
}


</script>
</html>